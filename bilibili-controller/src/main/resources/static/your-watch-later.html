<!doctype html>
<html lang="en" xmlns:v-bind="http://www.w3.org/1999/xhtml">

<head>

    <!-- Basic Page Needs
    ================================================== -->
    <title>我的收藏</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="TubeLite is - Professional A unique and beautiful collection of UI elements">
    <link rel="icon" href="assets/images/favicon.png">

    <link href="css/iconfont/iconfont.css" rel="stylesheet">
    <!-- CSS
    ================================================== -->
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/night-mode.css">
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/uikit/3.2.1/css/uikit.min.css">

    <!-- icons
    ================================================== -->
    <link rel="stylesheet" href="assets/css/icons.css">

    <!-- Google font
    ================================================== -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">

</head>

<body>
<!-- Wrapper -->
<div id="wrapper">

    <!-- sidebar -->
    <div class="main_sidebar">
        <div class="side-overlay" uk-toggle="target: #wrapper ; cls: collapse-sidebar mobile-visible"></div>

        <!-- sidebar header -->
        <div class="sidebar-header">
            <h4> 导航</h4>
            <span class="btn-close" uk-toggle="target: #wrapper ; cls: collapse-sidebar mobile-visible"></span>
        </div>

        <!-- sidebar Menu -->
        <div class="sidebar">
            <div class="sidebar_innr" data-simplebar>

                <div class="sections">
                    <h3> 导航 </h3>
                    <ul>
                        <li class="active"><a href="home.html"> <i class="uil-home-alt"></i> <span> 首页 </span> </a>
                        </li>
                        <li><a href="browse-channals.html">
                        <li><a href="your-watch-later.html"> <i class="iconfont icon-shoucang"></i> <span> 我的收藏 </span>
                        </a>
                        </li>
                        <li><a href="your-laked-videos.html"> <i class="uil-thumbs-up"></i>
                            <span>  我推荐的视频 </span> </a></li>
                        <li><a href="playLive.html"> <i class="uil-thermometer"></i>
                            <span>  我要开播 </span> </a></li>
                        <li><a href="live-list.html"> <i class="uil-lightbulb-alt"></i>
                            <span> 正在直播 </span>
                        </a>
                        </li>
                        <li><a href="browse-catagroies.html"> <i class="uil-layers"></i> <span> 视频分类</span> </a>
                        </li>
                        <li><a href="your-history.html"> <i class="uil-history"></i> <span> 观看记录 </span> </a></li>
                    </ul>
                </div>


                <div id="focus">
                    <div class="sections">
                        <!--                <div class="sections" v-for="(f,index) in focuses">-->
                        <h3> 关注列表 </h3>
                        <!--                        <ul>-->
                        <ul v-for="(f,index) in focuses">
                            <li>
                                <a v-bind:href="['single-channal.html?fo_fo_no='+focuses[index].con_no]">
                                    <!--                            <li><a id="fo" href="single-channal.html?fo_fo_no=" v-on:click="AddParam(this)">-->

                                    <!--                            <li>-->
                                    <!--                                <a :href="single-channal.html+ '?fo_fo_no='+f.con_no">-->
                                    <img src="assets/images/avatars/avatar-3.jpg" alt="">
                                    <!--                                <span id="fd" style="color: white">{{f.con_no}}</span>-->
                                    <span> {{f.name}} </span> <span class="dot-notiv"></span></a>
                            </li>
                            <!--                            <li><a href="single-channal.html"> <img src="assets/images/avatars/avatar-3.jpg" alt="">-->
                            <!--                                <span> {{focuses[0].name}} </span> <span class="dot-notiv"></span></a></li>-->

                        </ul>

                        <!-- view more subcription-->
                        <!--                    <div class="uk-flex uk-flex-center mb-3">-->
                        <!--                        <a href="browse-channals.html" class="button default circle px-5">-->
                        <!--                            <i class="uil-plus mr-2"></i> 更多关注</a>-->
                        <!--                    </div>-->

                    </div>
                </div>

                <div class="sections">
                    <h3> 更多 </h3>
                    <ul>
                        <li><a href="page-setting.html"><i class="uil-cog"></i> <span> 账户设置 </span> </a></li>
                        <li><a href="#"><i class="uil-user-circle"></i> <span> 账户 </span> </a>
                            <ul>
                                <li>
                                    <a href="b_login.html"> 登录 </a>
                                    <a href="b_register.html"> 注册 </a>
                                </li>
                            </ul>

                        </li>
                    </ul>
                </div>

                <div id="foot">
                    <div class="foot-content">
                        <p>© 2021 <strong>IK</strong>. 版权所有. </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- header -->
    <div id="main_header">
        <header>

            <!-- Logo-->
            <i class="header-traiger uil-bars"
               uk-toggle="target: #wrapper ; cls: collapse-sidebar mobile-visible"></i>

            <!-- Logo-->
            <div id="logo">
                <!--                                <a href="#"> -->
                <!--                                    <img src="assets/images/logo.png" alt="">-->
                <!--                                </a>-->
                <!--                <a href="#"> -->
                <!--                    <img src="assets/images/logo-light.png" class="logo-inverse" alt="">-->
                <!--                </a>-->
                <!--                    <a href="#"> <img src="admin/images/logo.jpg" alt=""></a>-->
                <!--                    <a href="#"> <img src="admin/images/logo.jpg" width="50px" height="236" class="logo-inverse" alt=""></a>-->
            </div>

            <!-- form search-->
            <div class="head_search">
                <form>
                    <div class="head_search_cont">
                        <input value="" type="text" class="form-control" id="serch"
                               placeholder="视频" autocomplete="off">
                        <i class="s_icon uil-search-alt"></i>
                    </div>

                    <!-- Search box dropdown -->
                    <div uk-dropdown="pos: top;mode:click;animation: uk-animation-slide-bottom-small"
                         class="dropdown-search">
                        <!-- User menu -->

                        <ul class="dropdown-search-list">
                            <li class="list-title"> 最近搜索</li>
                            <li><a href="single-video.html"> 视频 </a></li>
                            <li><a href="single-video.html"> 如何创建基本的Sticky HTML元素.. </a>
                            </li>
                            <li><a href="single-video.html"> 了解在2020年如何使用Mockplus更快地进行原型制作！
                            </a></li>
                            <li><a href="single-video.html"> Adobe XD设计教程公司网站登录页面
                                .. </a></li>
                            <div class="menu-divider">
                                <li class="list-footer"><a href="your-history.html"> 观看记录 </a></li>
                            </div>
                        </ul>

                    </div>


                </form>
            </div>

            <!-- user icons -->
            <div class="head_user">

                <a href="page-pricing.html" class="btn-upgrade uk-visible@s"> <i class="uil-bolt-alt"></i> 大会员</a>
                <a href="#" class="btn-upload uk-visible@s"> <i class="uil-cloud-upload"></i> 投稿</a>

                <!-- upload dropdown box -->
                <div uk-dropdown="pos: top-right;mode:click ; animation: uk-animation-slide-bottom-small"
                     class="dropdown-notifications">

                    <!-- notivication header -->
                    <div class="dropdown-notifications-headline">
                        <h4>Upload Video</h4>
                    </div>

                    <!-- notification contents -->
                    <div class="dropdown-notifications-content uk-flex uk-flex-middle uk-flex-center text-center">


                        <div class="uk-flex uk-flex-column choose-upload  text-center">
                            <img src="assets/images/upload.png" width="70" class="m-auto" alt="">
                            <p class="my-3"> 分享生活，分享每一份美好 <br> 点击上传...
                            </p>
                            <div uk-form-custom>
                                <input type="file">
                                <a href="#" class="button soft-primary small"> 选择文件</a>
                            </div>

                            <!--                            <a href="#" class="uk-text-muted mt-3 uk-link"-->
                            <!--                               uk-toggle="target: .choose-upload ;  animation: uk-animation-slide-right-small, uk-animation-slide-left-medium; queued: true">-->
                            <!--                                Or Import Video -->
                            <!--                            </a>-->
                        </div>

                        <!--                        <div class="uk-flex uk-flex-column choose-upload" hidden>-->
                        <!--                            <i class="uil-import icon-large text-muted"></i>-->
                        <!--                            <p class="my-3"> Import videos from YouTube <br> Copy / Paste your video link here </p>-->
                        <!--                            <form class="uk-grid-small" uk-grid>-->
                        <!--                                <div class="uk-width-expand">-->
                        <!--                                    <input type="text" class="uk-input uk-form-small" placeholder="Paste link">-->
                        <!--                                </div>-->
                        <!--                                <div class="uk-width-auto">-->
                        <!--                                    <button type="submit" class="button soft-primary">-->
                        <!--                                        Import-->
                        <!--                                    </button>-->
                        <!--                                </div>-->
                        <!--                            </form>-->
                        <!--                            <a href="#" class="uk-text-muted mt-3 uk-link"-->
                        <!--                               uk-toggle="target: .choose-upload ; animation: uk-animation-slide-left-small, uk-animation-slide-right-medium; queued: true">-->
                        <!--                                Or Upload Video </a>-->
                        <!--                        </div>-->


                    </div>
                    <hr class="m-0">
                    <div class="text-center uk-text-small py-2 uk-text-muted"> 您的视频大小不得超过999MB
                    </div>
                </div>


                <!-- videos feed  -->
                <a href="#video" class="opts_icon" uk-toggle>
                    <i class="uil-youtube-alt"></i>
                    <!--                    <span></span> -->
                </a>

                <!-- videos feed  offcanvas-->
                <div id="video" uk-offcanvas="overlay: true ;flip: true">
                    <div class="uk-offcanvas-bar uk-width-large" id="myVideos">

                        <h3> 我的投稿 </h3>
                        <hr class="mb-3" style="margin:0 -20px">
                        <button class="uk-offcanvas-close" type="button" uk-close></button>

                        <div class="video-list-small uk-child-width-1-1"  >

                            <div>
                                <ul v-for="(v,index) in myVideos">
                                    <li>
                                        <a v-bind:href="['single-video.html?v_no='+myVideos[index].v_no]"
                                           class="video-post video-post-list">
                                            <!-- Blog Post Thumbnail -->
                                            <div class="video-post-thumbnail">
                                                <span class="video-post-count">{{v.v_amount_of_play}}</span>
                                                <!--<span class="video-post-time">23:00</span>-->
                                                <span class="play-btn-trigger"></span>

                                                <img v-bind:src="myVideos[index].v_pic" alt="">

                                            </div>

                                            <!-- Blog Post Content -->
                                            <div class="video-post-content">
                                                <h3 style="color: white">{{v.v_title}}</h3>
                                                <!--<img src="assets/images/avatars/avatar-3.jpg" alt="">-->
                                                <span class="video-post-user">{{v.name}}</span>
                                                <span class="video-post-views">{{v.v_amount_of_play}}</span>
                                                <!--<span class="video-post-date"> 2 weeks ago </span>-->
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </div>



                        </div>

                    </div>
                </div>

                <!-- profile -image -->
                <a class="opts_account"> <img src="assets/images/avatars/avatar-2.jpg" alt=""></a>

                <!-- profile dropdown-->
                <div uk-dropdown="pos: top-right;mode:click ; animation: uk-animation-slide-bottom-small"
                     class="dropdown-notifications small">

                    <!-- User Name / Avatar -->
                    <a href="#">

                        <div class="dropdown-user-details">
                            <div class="dropdown-user-avatar">
                                <img src="assets/images/avatars/avatar-2.jpg" alt="">
                            </div>
                            <div class="dropdown-user-name">
                                <span id="usn"> 未登录</span>
                                <span id="yz"> 未登录 <i class="uil-check"></i> </span>
                            </div>
                        </div>

                    </a>

                    <!-- User menu -->

                    <ul class="dropdown-user-menu">
                        <li><a href="page-pricing.html"> <i class="uil-bolt"></i> 大会员</a></li>
                        <!--                        <li><a href="browse-channals.html"> <i class="uil-user"></i> 我的关注 </a></li>-->
                        <li><a href="your-laked-videos.html"> <i class="uil-thumbs-up"></i> 我推荐的视频 </a></li>
                        <li><a href="b_collections.html"> <i class="uil-history"></i> 我的收藏 </a></li>
                        <li><a href="page-setting.html"> <i class="uil-cog"></i> 账户设置</a></li>
                        <li>
                            <a href="#" id="night-mode" class="btn-night-mode">
                                <i class="icon-feather-moon"></i> 夜间模式
                                <span class="btn-night-mode-switch">
                                        <span class="uk-switch-button"></span>
                                    </span>
                            </a>
                        </li>
                        <div class="menu-divider">
                            <li><a href="b_login.html"> <i class="icon-feather-log-out"></i> 退出登录</a>
                            </li>
                        </div>
                    </ul>


                </div>

            </div>

        </header>

    </div>


    <!-- contents -->
    <div class="main_content">
        <div class="main_content_inner">

            <div uk-grid>

                <div class="uk-width-1-4@m uk-flex-last@m"></div>

                <div class="uk-width-3-4@m" id="vo">
                    <div class="section-header mb-5 border-bottom uk-flex-middle">
                        <div class="section-header-left">
                            <h3> 我的收藏</h3>
                        </div>
                    </div>

                    <ul v-for="(v,index) in videos">
                        <li>
                            <a v-bind:href="['single-video.html?v_no='+videos[index].v_no]" class="video-post video-post-list">
                                <!-- Blog Post Thumbnail -->
                                <div class="video-post-thumbnail">
                                    <span class="play-btn-trigger"></span>
                                    <img v-bind:src="videos[index].v_pic" alt="">
                                </div>
                                <!-- Blog Post Content -->
                                <div class="video-post-content">
                                    <h3>{{v.v_title}}</h3>
                                    <span class="video-post-user">视频作者：sonnie</span>
                                    <span class="video-post-views">播放量：{{v.v_amount_of_play}}</span>
                                    <p> 视频标签：{{v.tagNames}}</p>
                                    <!-- option menu -->
                                    <span class="btn-option">
                                    <i class="icon-feather-more-vertical"></i>
                                </span>
                                    <div class="dropdown-option-nav" uk-dropdown="pos: bottom-right ;mode : hover">
                                        <ul>
                                            <li>
                                                <span> <i class="iconfont icon-bofangliang"></i> 播放量 ：<span>{{v.v_amount_of_play}}</span></span>
                                            </li>
                                            <li>
                                                <span> <i class="iconfont icon-dianzan"></i> 点赞数：<span>{{v.v_likes}}</span></span>
                                            </li>
                                            <li>
                                                <span> <i class="iconfont icon-shoucang"></i> 被收藏：<span>666</span></span>
                                            </li>
                                        </ul>
                                    </div>

                                </div>
                            </a>
                        </li>

                    </ul>
                </div>
            </div>


            <!-- footer -->
            <div class="footer">
                <div class="uk-grid-collapse" uk-grid>
                    <div class="uk-width-expand@s uk-first-column">
                        <p>© 2021 <strong>IK</strong>. 版权所有. </p>
                    </div>
                    <div class="uk-width-auto@s">
                        <nav class="footer-nav-icon">
                            <ul>
                                <li><a href="https://www.baidu.com/"><i class=""></i></a></li>
                                <li><a href="https://www.baidu.com/"><i class=""></i></a></li>
                                <li><a href="https://www.baidu.com/"><i class=""></i></a></li>
                                <li><a href="https://www.baidu.com/"><i class=""></i></a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>


        </div>
    </div>
</div>
</div>


<!-- For Night mode -->
<script>
    (function (window, document, undefined) {
        'use strict';
        if (!('localStorage' in window)) return;
        var nightMode = localStorage.getItem('gmtNightMode');
        if (nightMode) {
            document.documentElement.className += ' night-mode';
        }
    })(window, document);


    (function (window, document, undefined) {

        'use strict';

        // Feature test
        if (!('localStorage' in window)) return;

        // Get our newly insert toggle
        var nightMode = document.querySelector('#night-mode');
        if (!nightMode) return;

        // When clicked, toggle night mode on or off
        nightMode.addEventListener('click', function (event) {
            event.preventDefault();
            document.documentElement.classList.toggle('night-mode');
            if (document.documentElement.classList.contains('night-mode')) {
                localStorage.setItem('gmtNightMode', true);
                return;
            }
            localStorage.removeItem('gmtNightMode');
        }, false);

    })(window, document);
</script>


<!-- javaScripts
            ================================================== -->
<script src="https://cdn.bootcdn.net/ajax/libs/uikit/3.2.1/js/uikit.min.js"></script>
<script src="assets/js/jquery-3.3.1.min.js"></script>
<script src="assets/js/simplebar.js"></script>
<script src="assets/js/main.js"></script>
<script src="js/vue.js"></script>
<script src="js/head.js"></script>
<script>
    $(function () {
        var username = localStorage.getItem("name");
        $("#usn").html(username);
        var token = localStorage.getItem("token");
        var role;
        var v_no;
        var f_no;
        var l_no;
        if(username !== null){
            $("#yz").html("已验证");
        }
        var con_no;
        var home = new Vue({
            el: '#focus',
            data: {
                focuses:[],
                videos:[]
            },
            mounted: function () {

            },
            methods: {

                //鉴权——》视频
                toVideo:function(index){
                    $.ajax({
                        url: basePath + "/getConByRequestToken",
                        type: "post",
                        dataType: "json",//接收类型
                        beforeSend: function (request) {
                            request.setRequestHeader("token", token);
                        },
                        success: function (data) {
                            console.log(data);
                            role = data.data.role_no;
                            if(role!==null){
                                v_no= this.videos[index].v_no;

                                window.location.href = "single-video.html"+v_no;
                                console.log("v_no="+v_no);
                            }else{
                                window.location.href = "b_login.html";
                            }
                        }
                    });
                },
            }
        });



        //获取用户id
        $.ajax({
            url: basePath + "/getConsumersByName",
            type: "post",
            dataType: "json",//接收类型
            // dataType: "text",
            // beforeSend:function(request){
            //     request.setRequestHeader("Authorization",token);
            // },
            data: {
                "name": username
            },
            success: function (data) {
                console.log(data);
                console.log(data.data.con_no);
                con_no = data.data.con_no;
                $.ajax({
                    url: basePath + "/getAllFocusConsumerByCon",
                    type: "post",
                    dataType: "json",//接收类型
                    // dataType: "text",
                    // beforeSend:function(request){
                    //     request.setRequestHeader("Authorization",token);
                    // },
                    data: {
                        "con_no": con_no
                    },
                    success: function (data) {
                        console.log(data);
                        home.focuses = data.data;
                    }
                })
            }
        });


        var vs = new Vue({
            el:"#vo",
            data:{
                videos:[]
            },
            mounted: function () {

            },
            methods:{

            }
        });

        var conNo = localStorage.getItem("con_no");
        $.ajax({
            url:basePath+"/getCollectionsNotPage?con_no="+conNo,
            type:"get",
            dataType:"json",
            data:{

            },
            success: function (data) {

                // home.videos = data.data;
                vs.videos = data.data;
                console.log(vs.videos);
            }

        });

        var mV = new Vue({
            el: "#myVideos",
            data: {
                myVideos: []
            },
            mounted: function () {

            },
            methods: {}
        });
        //获取我的投稿列表
        var conNo = localStorage.getItem("con_no");
        $.ajax({
            url: basePath + "/getListByConNo?con_no="+conNo,
            type: "get",
            dataType: "json",
            data: {},
            success: function (data) {
                // console.log(data.data);
                mV.myVideos = data.data;
            }

        });

        //搜索功能
        $("#serch").keydown(function (event) {
            var vTitle = $("#serch").val();
            if (event.keyCode ==13){
                window.location.href =basePath+"/serchResult.html?v_title="+vTitle;

                //阻止默认事件
                return false;
            }

        });



        //显示我的头像
        // $.ajax({
        //     url: basePath + "/getPhoto",
        //     type: "get",
        //     dataType: "json",//接收类型
        //     // dataType: "text",
        //     // beforeSend:function(request){
        //     //     request.setRequestHeader("Authorization",token);
        //     // },
        //     data: {
        //         "con_no": con_no
        //     },
        //     success: function (data) {
        //         console.log(data);
        //     }
        // })

        //
        // // 获取直播间
        // $.get(basePath + "/Fan/getAllRoom?page=1", function (data) {
        //     console.log(data);
        //     home.lives = data.data.list;
        // });


    });
</script>

</body>

</html>