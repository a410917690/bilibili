<!doctype html>
<html lang="en" xmlns:v-bind="http://www.w3.org/1999/xhtml">

<head>

    <!-- Basic Page Needs
    ================================================== -->
    <title>直播播放页</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="TubeLite is - Professional A unique and beautiful collection of UI elements">
    <link rel="icon" href="assets/images/favicon.png">
    <link href="css/iconfont/iconfont.css" rel="stylesheet">
    <!-- CSS
    ================================================== -->
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/night-mode.css">
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/uikit/3.2.1/css/uikit.min.css">
    <!-- icons
    ================================================== -->
    <link rel="stylesheet" href="assets/css/icons.css">
    <!-- Google font
    ================================================== -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
    <link href="css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="css/video.css">
    <link href="css/iconfont/iconfont.css" rel="stylesheet">
    <link href="css/list.css" rel="stylesheet">
    <link href="css/scojs.css" rel="stylesheet">
    <link href="css/colpick.css" rel="stylesheet">
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
    <link href="css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="css/video.css">
    <link href="css/iconfont/iconfont.css" rel="stylesheet">
    <link href="css/list.css" rel="stylesheet">
    <link href="css/scojs.css" rel="stylesheet">
    <link href="css/colpick.css" rel="stylesheet">
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
    <script src="js/jquery-2.1.4.min.js"></script>
    <script src="js/jquery.shCircleLoader.js"></script>
    <script src="js/sco.tooltip.js"></script>
    <script src="js/colpick.js"></script>
    <script src="js/jquery.danmu.js"></script>
    <script src="js/main.js"></script>
    <script src="js/video.js"></script>
    <script src="js/vue.js"></script>
    <script src="js/head.js"></script>
    <script type='text/javascript' src="js/jwplayer.js"></script>
</head>

<body>
<!-- Wrapper -->
<div id="wrapper">

    <!-- sidebar -->
    <div class="main_sidebar">
        <div class="side-overlay" uk-toggle="target: #wrapper ; cls: collapse-sidebar mobile-visible"></div>

        <!-- sidebar header -->
        <div class="sidebar-header">
            <h4> 导航</h4>
            <span class="btn-close" uk-toggle="target: #wrapper ; cls: collapse-sidebar mobile-visible"></span>
        </div>

        <!-- sidebar Menu -->
        <div class="sidebar">
            <div class="sidebar_innr" data-simplebar>

                <div class="sections">
                    <h3> 导航 </h3>
                    <ul>
                        <li class="active"><a href="home.html"> <i class="uil-home-alt"></i> <span> 首页 </span> </a>
                        </li>
                        <li><a href="your-watch-later.html"> <i class="iconfont icon-shoucang"></i> <span> 我的收藏 </span>
                        </a>
                        </li>
                        <li><a href="your-laked-videos.html"> <i class="uil-thumbs-up"></i>
                            <span>  我推荐的视频 </span> </a></li>
                        <li><a href="playLive.html"> <i class="uil-thermometer"></i>
                            <span>  我要开播 </span> </a></li>
                        <li><a href="live-list.html"> <i class="uil-lightbulb-alt"></i>
                            <span> 正在直播 </span>
                        </a>
                        </li>
                        <li><a href="browse-catagroies.html"> <i class="uil-layers"></i> <span> 视频分类</span> </a>
                        </li>
                        <li><a href="your-history.html"> <i class="uil-history"></i> <span> 观看记录 </span> </a></li>
                    </ul>
                </div>


                <div id="focus">
                    <div class="sections">
                        <!--                <div class="sections" v-for="(f,index) in focuses">-->
                        <h3> 关注列表 </h3>
                        <!--                        <ul>-->
                        <ul v-for="(f,index) in focuses">
                            <li>
                                <a v-bind:href="['single-channal.html?fo_fo_no='+focuses[index].con_no]">
                                    <!--                            <li><a id="fo" href="single-channal.html?fo_fo_no=" v-on:click="AddParam(this)">-->

                                    <!--                            <li>-->
                                    <!--                                <a :href="single-channal.html+ '?fo_fo_no='+f.con_no">-->
                                    <img src="assets/images/avatars/avatar-3.jpg" alt="">
                                    <!--                                <span id="fd" style="color: white">{{f.con_no}}</span>-->
                                    <span> {{f.name}} </span> <span class="dot-notiv"></span></a>
                            </li>
                            <!--                            <li><a href="single-channal.html"> <img src="assets/images/avatars/avatar-3.jpg" alt="">-->
                            <!--                                <span> {{focuses[0].name}} </span> <span class="dot-notiv"></span></a></li>-->

                        </ul>

                        <!-- view more subcription-->
                        <!--                    <div class="uk-flex uk-flex-center mb-3">-->
                        <!--                        <a href="browse-channals.html" class="button default circle px-5">-->
                        <!--                            <i class="uil-plus mr-2"></i> 更多关注</a>-->
                        <!--                    </div>-->

                    </div>
                </div>

                <div class="sections">
                    <h3> 更多 </h3>
                    <ul>
                        <li><a href="page-setting.html"><i class="uil-cog"></i> <span> 账户设置 </span> </a></li>
                        <li><a href="#"><i class="uil-user-circle"></i> <span> 账户 </span> </a>
                            <ul>
                                <li>
                                    <a href="b_login.html"> 登录 </a>
                                    <a href="b_register.html"> 注册 </a>
                                </li>
                            </ul>

                        </li>
                    </ul>
                </div>

                <div id="foot">
                    <div class="foot-content">
                        <p>© 2021 <strong>IK</strong>. 版权所有. </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- header -->
    <div id="main_header">
        <header>

            <!-- Logo-->
            <i class="header-traiger uil-bars"
               uk-toggle="target: #wrapper ; cls: collapse-sidebar mobile-visible"></i>

            <!-- Logo-->
            <div id="logo">
                <!--<a href="#"> <img src="admin/images/logo.jpg" width="50px" height="236" class="logo-inverse" alt=""></a>&ndash;&gt;-->
            </div>

            <!-- form search-->
            <div class="head_search">
                <form>
                    <div class="head_search_cont">
                        <input value="" type="text" class="form-control" id="serch"
                               placeholder="视频" autocomplete="off">
                        <i class="s_icon uil-search-alt"></i>
                    </div>

                    <!-- Search box dropdown -->
                    <div uk-dropdown="pos: top;mode:click;animation: uk-animation-slide-bottom-small"
                         class="dropdown-search">
                        <!-- User menu -->

                        <ul class="dropdown-search-list">
                            <li class="list-title"> 最近搜索</li>
                            <li><a href="single-video.html"> Adobe XD设计免费教程.. </a></li>
                            <li><a href="single-video.html"> 如何创建基本的Sticky HTML元素.. </a>
                            </li>
                            <li><a href="single-video.html"> 了解在2020年如何使用Mockplus更快地进行原型制作！
                            </a></li>
                            <li><a href="single-video.html"> Adobe XD设计教程公司网站登录页面
                                .. </a></li>
                            <div class="menu-divider">
                                <li class="list-footer"><a href="your-history.html"> 观看记录 </a></li>
                            </div>
                        </ul>

                    </div>


                </form>
            </div>

            <!-- user icons -->
            <div class="head_user">

                <a href="page-pricing.html" class="btn-upgrade uk-visible@s"> <i class="uil-bolt-alt"></i> 大会员</a>
                <a href="#" class="btn-upload uk-visible@s"> <i class="uil-cloud-upload"></i> 投稿</a>

                <!-- upload dropdown box -->
                <div uk-dropdown="pos: top-right;mode:click ; animation: uk-animation-slide-bottom-small"
                     class="dropdown-notifications">

                    <!-- notivication header -->
                    <div class="dropdown-notifications-headline">
                        <h4>Upload Video</h4>
                    </div>

                    <!-- notification contents -->
                    <div class="dropdown-notifications-content uk-flex uk-flex-middle uk-flex-center text-center">


                        <div class="uk-flex uk-flex-column choose-upload  text-center">
                            <img src="assets/images/upload.png" width="70" class="m-auto" alt="">
                            <p class="my-3"> 分享生活，分享每一份美好 <br> 点击上传...
                            </p>
                            <div uk-form-custom>
                                <input type="file">
                                <a href="#" class="button soft-primary small"> 选择文件</a>
                            </div>

                        </div>


                    </div>
                    <hr class="m-0">
                    <div class="text-center uk-text-small py-2 uk-text-muted"> 您的视频大小不得超过999MB
                    </div>
                </div>


                <!-- videos feed  -->
                <a href="#video" class="opts_icon" uk-toggle>
                    <i class="uil-youtube-alt"></i>
                    <!--                    <span></span> -->
                </a>

                <!-- videos feed  offcanvas-->
                <div id="video" uk-offcanvas="overlay: true ;flip: true">
                    <div class="uk-offcanvas-bar uk-width-large">

                        <h3> 我的投稿 </h3>
                        <hr class="mb-3" style="margin:0 -20px">
                        <button class="uk-offcanvas-close" type="button" uk-close></button>

                        <div class="video-list-small uk-child-width-1-1" uk-grid>

                        </div>

                    </div>
                </div>

                <!-- profile -image -->
                <a class="opts_account"> <img src="assets/images/avatars/avatar-2.jpg" alt=""></a>

                <!-- profile dropdown-->
                <div uk-dropdown="pos: top-right;mode:click ; animation: uk-animation-slide-bottom-small"
                     class="dropdown-notifications small">

                    <ul class="dropdown-user-menu">
                        <li>
                            <a href="#" id="night-mode" class="btn-night-mode">
                                <i class="icon-feather-moon"></i> 夜间模式
                                <span class="btn-night-mode-switch">
                                        <span class="uk-switch-button"></span>
                                    </span>
                            </a>
                        </li>
                    </ul>


                </div>

            </div>

        </header>

    </div>


    <div id="v">
        <!--<div id="ti" style="font-size: 25px;"><span style="padding-left: 100px">{{video.v_title}}</span></div>-->
        <!--<div id="danmup" style="left: 150px;top:120px;padding-left: 120px;margin-left: 150px"></div>-->
        <div style="background-color: blue;left: 150px;top:180px;padding-left: 120px;margin-left: 200px;width: 1200px;height: 600px;margin-top: 130px">
            <div id="player" style="left: 150px;top:120px;padding-left: 120px;margin-left: 500px"></div>
        </div>
        <div class="alert_back">加载中</div>
        <h3 style="margin-left: 300px;padding-left: 20px;margin-top: 70px;padding-top: 70px">title</h3>
        <div style="padding-top: -15px;margin-top: -15px">
            <span style="margin-left: 300px;padding-left: 20px;margin-top: -50px;padding-top:-25px;color: gray;font-size: 11px">
            <i class="iconfont icon-bofangliang"></i> 播放量 ：<span>video.v_amount_of_play</span></span>
            <span style="margin-left: 50px;padding-left: 20px;margin-top: -50px;padding-top:-25px;color: gray;font-size: 11px">
                <i class="iconfont icon-dianzan"></i> 点赞数：<span>video.v_likes</span></span>
        </div>
        <div class="video-post-content" style="margin-left: 320px;flex: 2;padding-top: 26px;">
            <img src="assets/images/avatars/avatar-3.jpg" alt="">
            <span class="video-post-user">作者：video.name</span>
        </div>
        <div style="margin-left: 320px;height: 30px;width: 1100px;border-bottom: 1px solid;border-bottom-color:silver">
        </div>

        <div id="icon" style="margin-left: 170px;margin-top: 100px;display: flex;">
            <div>
                <span id="dz" class="iconfont icon-dianzan"></span>
                <div><span id="dz0" style="font-size: 18px;margin-left: 8px">video.v_likes</span></div>
            </div>
            <div>
                <span id="jb" class="iconfont icon-jinbi"></span>
                <div><span id="jb0" style="font-size: 18px;margin-left: 9px">video.v_coins</span></div>
            </div>
            <div>
                <span id="cl" class="iconfont icon-collection-b"></span>
                <div><span id="cl0" style="font-size: 16px;margin-left: -12px;">收藏一下</span></div>
            </div>
            <div>
                <span id="jbsp0" class="iconfont icon-jubao1"></span>
                <div><span id="rv" style="font-size: 16px;margin-left: 4px;">举报</span></div>
            </div>
            <div class="dropdown-option-nav" uk-dropdown="pos: bottom-right ;mode : hover">
                <ul>
                    <li>
                        <span id="report_efeg"> <h6>违法违规</h6></span>
                    </li>
                    <li>
                        <span id="report_sxcx"> <h6>涉嫌抄袭</h6></span>
                    </li>
                    <li>
                        <span id="report_seds"> <h6>色情低俗</h6></span>
                    </li>
                    <li>
                        <span id="report_rsgj"> <h6>人身攻击</h6></span>
                    </li>
                    <li>
                        <span id="report_ljgg"> <h6>垃圾广告</h6></span>
                    </li>
                    <li>
                        <span id=="report_eyyz"> <h6>恶意引战</h6></span>
                    </li>
                </ul>
            </div>
        </div>


        <!--    评论区-->
        <div style="padding-left: 150px;padding-top: 50px;margin-left: 300px">
            <span style="font-size: 30px">视频评论</span>
        </div>
        <div id="com" style="padding-left: 180px;margin-left: 270px">
            <div id="add">
                <div style="padding-top: 30px;padding-bottom: 10px">评论一下嘛...</div>
                <textarea name='comment' id="myCom" rows="8" cols="5" class='form-control' style='width: 840px;
                      background:white;border: 1px solid gainsboro;'
                          placeholder='发表一条友善的评论'>
        </textarea>
                <button id="s" style="height: 30px;background-color: deepskyblue;color: white;border: deepskyblue"
                >&nbsp;发&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;表&nbsp;
                </button>
            </div>
            <br>


            <div class="comments">

                <div>
                    <div class="video-post-content" style="flex: 2;padding-top: 26px;">
                        <img src="assets/images/avatars/avatar-3.jpg" alt="">
                    </div>
                    <span id="showName">com.name</span>
                </div>
                <textarea name='comment' rows="8" cols="5" class='form-control' style='width: 840px;
                      background:white;border: 1px solid gainsboro;font-size: 16px;margin-top: 3px' readonly="readonly"> com.con_comment</textarea>
                <span id="showTime" style="margin-left: 2px;color: grey;font-size: 12px">发表于com.com_time</span>


                <br><br>
            </div>

            <div style="padding-left: 350px">
                <input type="button" id="before" value="上一页 " style="border: gray 1px solid;height: 30px;width: 60px">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <input type="button" id="next" value=" 下一页" style="border: gray 1px solid;height: 30px;width: 60px">
            </div>

        </div>
    </div>


</div>


<!--    评论区-->


</div>

<!-- footer -->

<div class="footer">
    <div class="uk-grid-collapse" uk-grid>
        <div class="uk-width-expand@s uk-first-column">
            <p>© 2021 <strong>IK</strong>. 版权所有. </p>
        </div>
        <div class="uk-width-auto@s">
            <nav class="footer-nav-icon">
                <ul>
                    <li><a href="https://www.baidu.com/"><i class=""></i></a></li>
                    <li><a href="https://www.baidu.com/"><i class=""></i></a></li>
                    <li><a href="https://www.baidu.com/"><i class=""></i></a></li>
                    <li><a href="https://www.baidu.com/"><i class=""></i></a></li>
                </ul>
            </nav>
        </div>
    </div>
</div>
</div>
<!-- For Night mode -->
<script>
    (function (window, document, undefined) {
        'use strict';
        if (!('localStorage' in window)) return;
        var nightMode = localStorage.getItem('gmtNightMode');
        if (nightMode) {
            document.documentElement.className += ' night-mode';
        }
    })(window, document);


    (function (window, document, undefined) {

        'use strict';

        // Feature test
        if (!('localStorage' in window)) return;

        // Get our newly insert toggle
        var nightMode = document.querySelector('#night-mode');
        if (!nightMode) return;

        // When clicked, toggle night mode on or off
        nightMode.addEventListener('click', function (event) {
            event.preventDefault();
            document.documentElement.classList.toggle('night-mode');
            if (document.documentElement.classList.contains('night-mode')) {
                localStorage.setItem('gmtNightMode', true);
                return;
            }
            localStorage.removeItem('gmtNightMode');
        }, false);

    })(window, document);
</script>


<!-- javaScripts
            ================================================== -->
<script src="https://cdn.bootcdn.net/ajax/libs/uikit/3.2.1/js/uikit.min.js"></script>
<script src="assets/js/simplebar.js"></script>
<script src="assets/js/main.js"></script>

<script>
    $(function () {
        var username = localStorage.getItem("name");
        $("#usn").html(username);
        if (username !== null) {
            $("#yz").html("已验证");
        }

        var con_no;
        var home = new Vue({
            el: '#focus',
            data: {
                focuses: [],
                videos: [],
                fans: [],
                lives: [],
            },
            mounted: function () {

            },
            methods: {}
        });


        //获取用户id
        $.ajax({
            url: basePath + "/getConsumersByName",
            type: "post",
            dataType: "json",//接收类型
            // dataType: "text",
            // beforeSend:function(request){
            //     request.setRequestHeader("Authorization",token);
            // },
            data: {
                "name": username
            },
            success: function (data) {
                console.log(data);
                console.log(data.data.con_no);
                con_no = data.data.con_no;
                $.ajax({
                    url: basePath + "/getAllFocusConsumerByCon",
                    type: "post",
                    dataType: "json",//接收类型
                    // dataType: "text",
                    // beforeSend:function(request){
                    //     request.setRequestHeader("Authorization",token);
                    // },
                    data: {
                        "con_no": con_no
                    },
                    success: function (data) {
                        console.log(data);
                        home.focuses = data.data;
                    }
                })
            }
        })

    });
</script>

<script>
    $(function () {

        var token = localStorage.getItem("token");
        var name = localStorage.getItem("name");
        var con_no;
        var v_no;
        var num_likes;
        var com_page = 1;

        var v1 = new Vue({
            el: '#player',
            data: {
                video: [],
                comments: [],
                isCol: false,
                isLike: false,
                num_likes: num_likes,
                reply: [],
                num: "",

            },
            mounted: function () {

            },
            methods: {}
        });

        var v = new Vue({
            el: '#v',
            data: {
                title: ""
            },
            mounted: function () {

            },
            methods: {}
        });

        //获取地址中的参数
        function getQueryVariable(variable) {
            var query = window.location.search.substring(1);
            var vars = query.split("&");
            for (var i = 0; i < vars.length; i++) {
                var pair = vars[i].split("=");
                if (pair[0] == variable) {
                    return pair[1];
                }
            }
            return (false);
        }

        roomNo = getQueryVariable("room_no");
        $.ajax({
            url: basePath + "/Fan/getOneRoom?room_no=" + roomNo,
            type: "get",
            dataType: "json",
            success: function (data) {
                console.log(data);
                // console.log(data.data.v_url);
                console.log(data.data);
                // vl.video = data.data;
                v1.num = data.data.room_num;
                v.title = data.data.room_title;
                console.log(v1.num);
                console.log(v.title);

                jwplayer('player').setup({

                    'flashplayer': 'player.swf',
                    'file': v1.num,
                    'streamer': 'rtmp://49.234.77.189/live',
                    'controlbar': 'bottom',
                    'width': 1200,
                    'height': 600,
                    events: {
                        onReady: function () {
                            console.log('ready__')
                        }
                    }
                });
                // jwplayer('danmup').setup({
                //     'flashplayer': 'player.swf',
                //     'file': v1.num,
                //     'streamer': 'rtmp://49.234.77.189/live',
                //     'controlbar': 'bottom',
                //     'width': '1200px',
                //     'height': '600px'
                // });
            }
        });


        //搜索功能
        $("#serch").keydown(function (event) {
            var vTitle = $("#serch").val();
            if (event.keyCode == 13) {
                window.location.href = basePath + "/serchResult.html?v_title=" + vTitle;


                //阻止默认事件
                return false;
            }
        });

    });
</script>
</body>

</html>